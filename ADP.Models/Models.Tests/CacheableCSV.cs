using ShiftSoftware.ADP.Models;
using ShiftSoftware.ADP.Models.DealerData;

namespace Models.Tests;

public class CacheableCSV
{
    [Fact]
    public void SHA512ID()
    {
        var engine = new CacheableCSVEngine<SOLaborCSV>();

        var parsed = engine.ReadStringAsList(
"""
VIN,RTSCode,InvoiceState,LoadStatus,DateEdited,SOLabordata_DealerId,Comp,WIP,InvoiceNumber,SalesType,Account,MenuCode,ExtendedPrice,LineNumber,OriginalInvoice,Customer_Magic,Dep,Description,ServiceCode
JTDBR42E20J023689,473311,X,X,2017-07-12,2,11,10001,51100002,R,CS00001, ,36.00,1,0,7386,W,REAR DISC BRAKE PAD AND/OR DIS,BRK,,
RKLBZ9HE604000874,002119,X,X,2017-07-31,2,11,10002,51100381,R,CS00001, ,4.29,1,0,4040,W,ENGINE OIL,S01,,
RKLBZ9HE604000874,151011,X,X,2017-07-31,2,11,10002,51100381,R,CS00001, ,5.72,2,0,4040,W,OIL FILTER ASSEMBLY,S01,,
""");

        Assert.Equal("B9EA0ADA5476F49AA9F1E782DE2798257FF594AC9DB8B7624E48FF0BE7533D37EE39088C2D130DBB1D06C5703F5AD564FB227B13D1A12E8A912CB1D9DCEC3844", parsed[0].id);
        Assert.Equal("308C3E6BC8B5408B1B2EACD3583FD6B4CB5D4ECE94F963C365B02D1A5291D5B39F64D2A9C1F91E4535F16E302BF870C5B824812E1C58C7CD539D6C7BFB221593", parsed[1].id);
        Assert.Equal("0DD63068329A2ED571302F19C91134D975A99DC5A5A6AE0100EC8C7315D5EDB1B47ECB76EE701E6A525096D6E555D953600157A1587D479B5C1AB921A42A11E7", parsed[2].id);

        engine.Dispose();
    }
}