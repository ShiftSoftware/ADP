<!doctype html>
<html lang="en" x-data="demoForm()" x-init="init()">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo Form</title>

    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <script nomodule src="/build/shift-components.js"></script>
    <script type="module" src="/build/shift-components.esm.js"></script>
  </head>

  <body class="min-h-screen bg-base-200 flex flex-col items-center py-10 px-4 font-sans">
    <div class="w-full max-w-[1600px] bg-base-100 shadow-xl rounded-2xl p-8">
      <div class="flex items-center justify-between mb-4">
        <a href="#" onclick="history.back()" class="btn btn-ghost text-blue-600 hover:bg-blue-50">‚Üê Back</a>
        <h1 class="text-3xl font-extrabold text-gray-800">Demo Form</h1>
        <div class="w-[80px]"></div>
      </div>

      <div class="flex flex-col mb-8 items-center gap-4">
        <div class="text-center gap-3 flex items-center">
          <h2 class="text-lg font-semibold text-gray-700">üåê Language:</h2>
          <div class="flex flex-wrap justify-center gap-3">
            <template x-for="lang in languages" :key="lang">
              <button class="btn btn-outline btn-sm" @click="updateLang(lang)" x-text="lang.toUpperCase()"></button>
            </template>
          </div>
        </div>
      </div>
      <div class="w-full flex justify-center mb-4">
        <div class="badge badge-soft badge-xl badge-error mx-auto w-fit !p-2 text-lg">Error: This form is not maintained and outdated</div>
      </div>
      <div class="card border border-slate-50 bg-base-100 mx-auto shadow-sm w-fit flex">
        <div class="card-body">
          <demo-form
            theme="tiq"
            language="en"
            brand-id="kWrKw"
            id="custom-component"
            base-url="https://tiq-tickets.azurewebsites.net/api/external/website/general-inquiry"
          ></demo-form>
        </div>
      </div>
    </div>

    <script>
      function demoForm() {
        return {
          componentRef: null,
          languages: ['en', 'ku', 'ar', 'ru'],

          init() {
            this.componentRef = document.getElementById('custom-component');
            // demoForm.structure = {
            //   tag: 'div',
            //   id: 'container',
            //   children: [
            //     { tag: 'div', id: 'inputs_wrapper', children: ['name', 'email', 'cityId', 'phone', 'generalTicketType'] },
            //     { name: 'message', id: 'message' },
            //     { tag: 'div', id: 'recaptcha_container' },
            //     { name: 'submit', id: 'Submit' },
            //   ],
            // };

            this.componentRef.loadingChanges = this.loadingChanges;

            this.componentRef.successCallback = this.successCallback;

            this.componentRef.errorCallback = this.errorCallback;
          },

          updateLang(lang) {
            if (this.componentRef) this.componentRef.language = lang;
          },

          loadingChanges(loading) {
            console.log('loading', loading);
          },

          successCallback(values) {
            console.log('success callback', values);
          },

          errorCallback(error) {
            console.log('error callback', error);
          },
        };
      }
    </script>
  </body>
</html>
