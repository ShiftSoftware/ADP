if git diff --cached --name-only | grep -q '^ADP.WebComponents/adp-web-components/'; then
  echo "🔍 Staged changes found in adp-web-components. Running checks..."

  cd ADP.WebComponents/adp-web-components

  echo "🎨 Fixing Prettier formatting..."

  cd ADP.WebComponents/adp-web-components && npx lint-staged

  echo "🔧 TypeScript check..."

  yarn tsc --noEmit

  if [ $? -ne 0 ]; then
    echo "❌ TypeScript errors. Push aborted."
    exit 1
  fi

  echo "🧪 Running tests..."

  yarn test

  if [ $? -ne 0 ]; then
    echo "❌ Tests failed. Push aborted."
    exit 1
  fi

  echo "✅ All checks passed. Proceeding with push."
else
  echo "ℹ️ No staged changes in adp-web-components. Skipping Stencil checks."
fi